<div class="tools" *ngIf="route.children.length === 0">
    <div class="tool-buttons">
        <!--Creation tools-->
        <button matRipple class="tool" [matTooltip]="'Create Content'" [matTooltipClass]="'offprint-tooltip'" [matMenuTriggerFor]="createMenu"><i-feather name="loader"></i-feather>Create</button>
        <span class="tool-divider"></span>
        
        <ng-container *ngIf="itemSelected; else noItemSelected">
            <ng-container [ngSwitch]="currSelectedContent.audit.published">
                <button *ngSwitchCase="pubStatus.Published" matRipple class="tool active">
                    <i-feather name="check-circle"></i-feather>Published
                </button>
                <button *ngSwitchCase="pubStatus.Unpublished" matRipple class="tool" (click)="publishContent(currSelectedContent)">
                    <i-feather name="circle"></i-feather>Unpublished
                </button>
                <button *ngSwitchCase="pubStatus.Pending" matRipple class="tool">
                    <i-feather name="clock"></i-feather>Pending
                </button>
                <button *ngSwitchCase="pubStatus.Rejected" matRipple class="tool">
                    <i-feather name="x-circle"></i-feather>Rejected
                </button>
                <button *ngSwitchCase="pubStatus.ApprovedUnpublished" matRipple class="tool">
                    <i-feather name="circle"></i-feather>Approved
                </button>
            </ng-container>
        </ng-container>
        <ng-template #noItemSelected>
            <button matRipple class="tool disabled">
                <i-feather name="circle"></i-feather>Unpublished
            </button>
        </ng-template>
        <span class="tool-divider"></span>

        <!--Content tools-->
        <ng-container *ngIf="itemSelected; else noItem">
            <button matRipple class="tool left" (click)="deselect()" matTooltip="Deselect" matTooltipClass="offprint-tooltip">
                <i-feather class="no-text" name="x"></i-feather>
            </button>
            <button matRipple class="tool mid" (click)="viewContent(currSelectedContent)" matTooltip="Edit" matTooltipClass="offprint-tooltip">
                <i-feather class="no-text" name="edit-3"></i-feather>
            </button>
            <button matRipple class="tool end" (click)="deleteContent(currSelectedContent)" matTooltip="Delete" matTooltipClass="offprint-tooltip">
                <i-feather class="no-text" name="trash-2"></i-feather>
            </button>
            <span class="tool-divider"></span>
        </ng-container>
        <ng-template #noItem>
            <button matRipple class="tool left disabled" matTooltip="Deselect" matTooltipClass="offprint-tooltip">
                <i-feather class="no-text" name="x"></i-feather>
            </button>
            <button matRipple class="tool mid disabled" matTooltip="Edit" matTooltipClass="offprint-tooltip">
                <i-feather class="no-text" name="edit-3"></i-feather>
            </button>
            <button matRipple class="tool end disabled" matTooltip="Delete" matTooltipClass="offprint-tooltip">
                <i-feather class="no-text" name="trash-2"></i-feather>
            </button>
            <span class="tool-divider"></span>
        </ng-template>

        <!--Filtering tools-->
        <button matRipple class="tool left" [ngClass]="{'active': !isIconView}" matTooltip="List View" matTooltipClass="offprint-tooltip">
            <i-feather class="no-text" name="list"></i-feather>
        </button>
        <button matRipple class="tool mid" [ngClass]="{'active': isIconView}" matTooltip="Icon View" matTooltipClass="offprint-tooltip">
            <i-feather class="no-text" name="grid"></i-feather>
        </button>
        <button matRipple class="tool end" matTooltip="Filter" matTooltipClass="offprint-tooltip" [matMenuTriggerFor]="filterMenu">
            <i-feather class="no-text" name="filter"></i-feather>
        </button>
    </div>
    <form [formGroup]="searchStuff" class="tool-search">
        <div class="search-bar">
            <input type="text" formControlName="query" class="search-input" placeholder="Search your stuff...">
            <button matRipple class="search-submit" type="submit"><i-feather name="search"></i-feather></button>
        </div>
    </form>
</div>

<mat-menu #createMenu="matMenu">
    <button mat-menu-item [routerLink]="['new-prose']"><i-feather name="book-open"></i-feather>Add Prose</button>
    <button mat-menu-item [routerLink]="['new-poetry']"><i-feather name="feather"></i-feather>Add Poetry</button>
    <!--<button mat-menu-item><i-feather name="globe"></i-feather>Add Script</button>-->
    <button mat-menu-item [routerLink]="['new-blog']"><i-feather name="coffee"></i-feather>Add Blog</button>
</mat-menu>

<mat-menu #filterMenu="matMenu">
    <button mat-menu-item>By Name</button>
    <button mat-menu-item>By Kind</button>
    <button mat-menu-item>By Date Added</button>
</mat-menu>

<!--<div class="folder-routing">
    <ng-container *ngIf="currFolder; else topLevel">
        <h3><a (click)="goHome()">Home</a></h3> <i-feather name="chevron-right"></i-feather>
        <ng-container *ngFor="let parent of $any(currFolder.parents)">
            <h3>{{ parent.name }}</h3> <i-feather name="chevron-right"></i-feather>
        </ng-container>
        <h3 class="active">{{ currFolder.name }}</h3>
    </ng-container>
    <ng-template #topLevel>
        <h3 class="active">Home</h3>
    </ng-template>
</div>-->

<ng-container *ngIf="route.children.length === 0; else openedForms">
    <!--User nas nothing-->
    <div class="migration-notice">
        <div class="migration-prompt">
            <h4>Looking for something?</h4>
            <p>
                Not to worry! Let's bring some of your old stuff over, shall we?
            </p>
        </div>
        <div class="migration-button">
            <button matRipple [routerLink]="['/migration']">View Old Content</button>
        </div>
    </div>

    <ng-container *ngIf="myContent.length === 0; else hasContent">
        <div class="empty">
            <h3>It's pretty lonely here...</h3>
            <p>Why not add some content by hitting the create button?</p>
        </div>
    </ng-container>
        
    <!--User has content-->
    <ng-template #hasContent>
        <div class="content-block">
            <div class="content-grid">
                <ng-container *ngFor="let content of myContent">
                    <content-item [content]="content" [selected]="itemSelected" (selectItem)="selectItem($event)" (viewItem)="viewContent($event)"></content-item>
                </ng-container>
            </div>
        </div>
    </ng-template>
</ng-container>

<ng-template #openedForms>
    <router-outlet></router-outlet>
</ng-template>