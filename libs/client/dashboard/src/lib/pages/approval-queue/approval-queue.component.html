<ng-container *ngIf="route.children.length === 0; else navigated">
    <ng-container *ngIf="queueIsEmpty(); else notEmpty">
        <div class="empty">
            <h3>Queue's clear!</h3>
            <p>If that was you, well done! If it wasn't, then just sit around and wait for more I guess.</p>
        </div>
    </ng-container>

    <ng-template #notEmpty>
        <table class="table-auto my-6 w-11/12 mx-auto border-collapse">
            <thead class="border-b border-gray-600 dark:border-white">
            <tr>
                <th>Claims</th>
                <th>Title</th>
                <th>Author</th>
                <th>Desc</th>
                <th>Tags</th>
                <th>Fandom Tags</th>
                <th>Rating</th>
                <th>Words</th>
                <th>Submitted</th>
            </tr>
            </thead>
            <tbody>
            <tr
                class="border-b border-gray-600 dark:border-white"
                *ngFor="let entry of queue.docs | paginate: { itemsPerPage: queue.limit, currentPage: pageNum, totalItems: queue.totalDocs }"
            >
                <td class="p-2 border-r border-gray-600 dark:border-white">
                    <ng-container *ngIf="checkIfClaimed(entry); else notClaimed">
                        <ng-container *ngIf="checkIfClaimedByThisUser(entry); else notThisUser">
                            <a class="cursor-pointer" (click)="goToContentView(entry)">View >></a>
                        </ng-container>
                        <ng-template #notThisUser>
                            <img class="w-12 h-12 rounded-md border border-gray-600 dark:border-white" [src]="entry.claimedBy.profile.avatar" [alt]="'avatar'">
                        </ng-template>
                    </ng-container>
                    <ng-template #notClaimed>
                        <button (click)="claimWork(entry)">
                            <rmx-icon name="add-box-line"></rmx-icon>
                            <span>Claim</span>
                        </button>
                    </ng-template>
                </td>
                <td class="p-2 border-r border-gray-600 dark:border-white">
                    {{ entry.workToApprove.title }}
                </td>
                <td class="p-2 border-r border-gray-600 dark:border-white">
                    <a [routerLink]="['/profile', entry.workToApprove.author._id, entry.workToApprove.author.userTag]">
                        {{ entry.workToApprove.author.screenName }}
                    </a>
                </td>
                <td class="p-2 border-r border-gray-600 dark:border-white">
                    <a class="cursor-pointer" (click)="viewDescription(entry.workToApprove.body)">View >></a>
                </td>
                <td class="p-2 flex items-center flex-wrap border-r border-gray-600 dark:border-white">
                    <dragonfish-tag-badge [kind]="tagKinds.Type" [type]="entry.workToApprove.kind"></dragonfish-tag-badge>
                    <dragonfish-tag-badge [kind]="tagKinds.Category" [category]="entry.workToApprove.meta.category"></dragonfish-tag-badge>
                    <ng-container *ngFor="let genre of entry.workToApprove.meta.genres">
                        <dragonfish-tag-badge [kind]="tagKinds.Genre" [genre]="genre"></dragonfish-tag-badge>
                    </ng-container>
                </td>
                <td class="p-2 flex-wrap border-r border-gray-600 dark:border-white">
                    <ng-container *ngFor="let tag of entry.workToApprove.tags; let i = index">
                        <a
                            [routerLink]="['/tag', tag._id, tag.name | slugify]"
                            [innerHtml]="tag | displayTags | safeHtml"
                        ></a>
                        <ng-container *ngIf="i < entry.workToApprove.tags.length - 1">
                            ,
                        </ng-container>
                    </ng-container>
                </td>
                <td class="p-2 border-r border-gray-600 dark:border-white">
                    {{ entry.workToApprove.meta.rating }}
                </td>
                <td class="p-2 border-r border-gray-600 dark:border-white">
                    {{ entry.workToApprove.stats.words | abbreviate }}
                </td>
                <td class="p-2">
                    {{ entry.createdAt | localedate: 'shortDate' }}
                </td>
            </tr>
            </tbody>
        </table>

        <pagination-controls
            (pageChange)="onPageChange($event)"
            previousLabel=""
            nextLabel=""
            *ngIf="!queueIsEmpty()"
        ></pagination-controls>
    </ng-template>
</ng-container>

<ng-template #navigated>
    <router-outlet></router-outlet>
</ng-template>
