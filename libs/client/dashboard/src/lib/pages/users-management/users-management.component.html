<div class="code-generator my-8">
    <div class="title">
        <h2 class="text-4xl">Generate New Code</h2>
        <div class="mx-auto w-full">
            <button (click)="generateCode()">generate</button>
        </div>
    </div>
    <div>
        <ng-container *ngIf="currCode; else noCode">
            <span>
                {{ currCode._id }}
            </span>
        </ng-container>
        <ng-template #noCode>
            <span>
                No code generated.
            </span>
        </ng-template>
    </div>
</div>
<div class="form-container">
    <div class="form-header flex flex-row items-center mb-8">
        <h3 class="text-4xl flex-1">{{ "Create Fandom Tag" }}</h3>
        <button class="form-button shadow-none" (click)="createFandomTag()">Create</button>
        <button class="form-button shadow-none" (click)="createFandomTagAsChildOfSelected()">Add as child of selected</button>
    </div>
    <form [formGroup]="tagForm" (ngSubmit)="createFandomTag()">
        <dragonfish-text-field
            [formControlName]="'name'"
            [name]="'name'"
            [type]="'text'"
            [label]="'Name'"
            [placeholder]="'There\'s Something I Gotta Say...'"
        ></dragonfish-text-field>
        <div class="offprint-select">
            <label>Tags</label>
            <ng-select class="custom" [formControlName]="'selectedTag'" [searchable]="false" [multiple]="true" [placeholder]="'Select Tag'">
                <ng-option *ngFor="let tag of currTags" [value]="tag._id">
                    {{ tag.name }}
                    <ng-option *ngFor="let childTag of tag.children" [value]="childTag._id">
                        {{ tag.name }} —> {{ childTag.name }}
                    </ng-option>
                </ng-option>
            </ng-select>
        </div>
    </form>
    <div>
        <ng-container *ngIf="currTags; else noTag">
            <div *ngFor="let tag of currTags">
                <input type="checkbox" />
                    {{ tag.name }}
                <div *ngFor="let child of tag.children">
                    <input type="checkbox" />
                        —{{ child.name }}
                </div>
            </div>
        </ng-container>
        <ng-template #noTag>
            <span>
                No tag created.
            </span>
        </ng-template>
    </div>
</div>
