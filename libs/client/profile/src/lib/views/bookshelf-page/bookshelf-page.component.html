<div class="flex flex-col w-11/12 my-6 mx-auto" *ngIf="shelves.current$ | async as shelf">
    <div
        class="flex items-center my-6 w-9/12 mx-auto p-4 rounded-md border border-gray-600 dark:border-white"
        style="box-shadow: var(--dropshadow); background: var(--accent);"
    >
        <div class="h-36 w-36 flex flex-col items-center justify-center border-4 rounded-md mr-4 text-white">
            <rmx-icon name="bar-chart-2-fill"></rmx-icon>
        </div>
        <div class="flex-1 mr-2">
            <h3 class="text-3xl font-medium text-white">{{ shelf.name }}</h3>
            <div class="text-white">
                {{ shelf.desc }}
            </div>
            <div class="flex items-center text-white">
                <span class="italic">{{ shelf.createdAt | localedate:'mediumDate' }}</span>
                <span class="text-lg mr-1 ml-1.5">â€¢</span>
                <span class="italic">{{ shelf.works | abbreviate }} work{{ shelf.works | pluralize }}</span>
            </div>
        </div>
        <div class="flex items-center">
            <button
                class="header-button border border-gray-600 dark:border-white"
                [matTooltip]="'More options'"
                [matTooltipClass]="'offprint-tooltip'"
                [matMenuTriggerFor]="moreOptions"
                (menuOpened)="toggleMenu()"
                (menuClosed)="toggleMenu()"
                [ngClass]="{'active': moreMenuOpened}"
            >
                <rmx-icon name="more-2-fill" class="mr-0"></rmx-icon>
            </button>
        </div>
    </div>
    <ng-container *ngIf="shelves.items$ | async as items">
        <ng-container *ngIf="items.length === 0; else hasItems">
            <div class="empty">
                <h3>Nothing's here yet!</h3>
                <p>Check back later when something's been added.</p>
            </div>
        </ng-container>
        <ng-template #hasItems>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 mb-6">
                <ng-container *ngFor="let item of items">
                    <dragonfish-work-card
                        [content]="item.content"
                        [size]="'small'"
                    ></dragonfish-work-card>
                </ng-container>
            </div>
        </ng-template>
    </ng-container>
    <mat-menu #moreOptions='matMenu' xPosition="before">
        <button
            class="hover:scale-100"
            mat-menu-item
            [routerLink]="['/profile', profile.profileId, profile.userTag, 'bookshelf', shelf._id]"
        >
            <rmx-icon name="share-box-line"></rmx-icon>
            Share this
        </button>
        <div class="my-1 w-full border-b border-gray-600 dark:border-white"></div>
        <button class="hover:scale-100" mat-menu-item>
            <rmx-icon name="alert-line"></rmx-icon>
            Report this
        </button>
    </mat-menu>
</div>
