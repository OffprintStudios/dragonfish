<ng-container *ngIf="pseudQuery.current$ | async as user">
    <div class="absolute top-0 z-50 flex w-full" style="box-shadow: var(--dropshadow); left: 4.125rem;">
        <div class="menu-box border-gray-600 dark:border-white">
            <div class="cover-pic absolute z-10 w-full h-36 left-0 pointer-events-none" [ngClass]="user.profile.coverPic ? '' : 'has-accent'">
                <img
                    class="object-cover object-center w-full h-full"
                    [src]="user.profile.coverPic"
                    *ngIf="user.profile.coverPic"
                />
            </div>
            <div class="user-header">
                <div class="flex flex-row items-center">
                    <div class="user-avatar">
                        <img [src]="user.profile.avatar" />
                    </div>
                    <div class="ml-2">
                        <div class="flex items-center">
                            <dragonfish-role-badge [roles]="user.roles" [size]="'small'"></dragonfish-role-badge>
                            <h2 class="text-2xl font-medium relative top-0.5">
                                {{ user.screenName }}
                            </h2>
                        </div>
                        <h3 class="text-sm font-medium">
                            @{{ user.userTag }}
                        </h3>
                        <div class="flex items-center text-xs">
                            <span>{{ user.stats.followers | abbreviate }} follower{{ user.stats.followers | pluralize }}</span>
                            <span class="mx-1">|</span>
                            <span>{{ user.stats.following | abbreviate }} following</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="px-4">
                <div class="button border border-gray-600 dark:border-white justify-center" [routerLink]="['/profile', user._id, user.userTag]">
                    <rmx-icon name="user-line"></rmx-icon>
                    <span>View Profile</span>
                </div>
            </div>
            <div class="my-2"></div>
            <div class="tab-buttons border-gray-600 dark:border-white">
                <div
                    class="button border-gray-600 dark:border-white"
                    [ngClass]="{'active': currTab === tabs.FriendsTab}"
                    (click)="switchTab(tabs.FriendsTab)"
                >
                    <rmx-icon name="group-line"></rmx-icon>
                    <span class="label">Friends</span>
                </div>
                <div
                    class="button border-gray-600 dark:border-white"
                    [ngClass]="{'active': currTab === tabs.MessagesTab}"
                    (click)="switchTab(tabs.MessagesTab)"
                >
                    <rmx-icon name="chat-smile-3-line"></rmx-icon>
                    <span class="label">Messages</span>
                </div>
                <div
                    class="button border-gray-600 dark:border-white active"
                    [ngClass]="{'active': currTab === tabs.NotificationsTab}"
                    (click)="switchTab(tabs.NotificationsTab)"
                    [matBadge]="notifications.numNotifications"
                    [matBadgeHidden]="notifications.numNotifications === 0"
                >
                    <rmx-icon name="notification-3-line"></rmx-icon>
                    <span class="label">Notifications</span>
                </div>
            </div>
            <div class="flex-1 w-full h-full overflow-y-auto">
                <ng-container [ngSwitch]="currTab">
                    <ng-container *ngSwitchCase="tabs.FriendsTab">
                        <dragonfish-friends-list></dragonfish-friends-list>
                    </ng-container>
                    <ng-container *ngSwitchCase="tabs.MessagesTab">
                        <dragonfish-messages-feed></dragonfish-messages-feed>
                    </ng-container>
                    <ng-container *ngSwitchCase="tabs.NotificationsTab">
                        <dragonfish-notifications-list></dragonfish-notifications-list>
                    </ng-container>
                </ng-container>
            </div>
            <div class="tool-buttons border-gray-600 dark:border-white">
                <button class="border border-gray-600 dark:border-white" [routerLink]="['/registration/select-pseud']">
                    <rmx-icon name="group-2-line"></rmx-icon>
                    <span>Profiles</span>
                </button>
                <div class="mx-1"></div>
                <button class="border border-gray-600 dark:border-white" (click)="logout()">
                    <rmx-icon name="logout-circle-line"></rmx-icon>
                    <span>Log out</span>
                </button>
            </div>
        </div>
        <div class="blurred-background"></div>
    </div>
</ng-container>
